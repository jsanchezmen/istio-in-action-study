# kube-prometheus-stack configuration for local Kind cluster
# This file overrides default values from the upstream chart
# Reference: https://github.com/prometheus-community/helm-charts/blob/main/charts/kube-prometheus-stack/values.yaml

# Prometheus configuration
prometheus:
  prometheusSpec:
    # Reduce retention for local testing (default: 10d)
    retention: 24h
    retentionSize: "5GB"

    # Disable persistence (ephemeral local cluster)
    storageSpec: {}

    # Reduce resources for local environment
    resources:
      requests:
        cpu: 200m
        memory: 512Mi
      limits:
        cpu: 1000m
        memory: 2Gi

    # Single replica for local dev
    replicas: 1

  service:
    type: NodePort
    nodePort: 30090  # Fixed port for easy access

# Grafana configuration
grafana:
  enabled: true

  # Admin credentials
  adminPassword: admin

  # Disable persistence
  persistence:
    enabled: false

  # Reduce resources
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi

  service:
    type: NodePort
    nodePort: 30300  # Fixed port for Grafana UI

# Alertmanager configuration
alertmanager:
  alertmanagerSpec:
    # Reduce retention (default: 120h)
    retention: 24h

    # Disable persistence
    storage: {}

    # Reduce resources
    resources:
      requests:
        cpu: 50m
        memory: 128Mi
      limits:
        cpu: 200m
        memory: 256Mi

    # Single replica
    replicas: 1

  service:
    type: NodePort
    nodePort: 30903  # Standard Alertmanager port

# Node Exporter configuration
nodeExporter:
  enabled: true

  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 200m
      memory: 128Mi

# Kube State Metrics configuration
kube-state-metrics:
  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 200m
      memory: 128Mi

# Prometheus Operator configuration
prometheusOperator:
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 256Mi
